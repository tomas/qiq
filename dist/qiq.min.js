var qiq=function(){var i={},f=/\{\{ ?| ?\}\}/;function h(e){return e.name||(e.toString().match(/function (.+?)\(/)||[,""])[1]}function g(e,r,n,t){var i=e[r];if(4==n)return!(g.last=i)||void 0!==i.length&&!i.length?"":t(e);if(1<n&&g.last&&(!Array.isArray(g.last)||g.last.length))return g.last=null,"";if(Array.isArray(i))return n%3==0?i.length?"":t(e):1==n?i.map(t).join(""):t(i);if(1==n&&i&&i.constructor===Object)return t(i);if("function"==typeof i){if("boolean"!=typeof(i=i.call(e,t(e))))return i;i||2!==n||(i=!i)}return n%3==0&&(i=!i),(g.last=i)?t(e):""}function d(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(e,r){r=r||{};for(var n,t,i=[],o={},u=[],c=e.split(r.delimiter||f),l=r.escapeNewLines?"\\\\\\n":"\\n",a=h(d),s=h(g),p=0;p<c.length;++p)if(n=c[p],p%2==0)i.push('"'+n.replace(/"/g,'\\"')+'"');else switch(n[0]){case"/":""!=(n=n.slice(1))&&u[u.length-1]!=n||(i.push("})+"),u.pop(),delete o[n]);break;case"^":n=n.slice(1),t=0,u.push(n),m(n),y(o[n]),o[n]=t,i.push("+"+s+'(o,"'+n+'",'+t+",function(o,i){return ");break;case"#":n=n.slice(1),t=1,u.push(n),m(n),y(n,o[n]),o[n]=t,i.push("+"+s+'(o,"'+n+'",'+t+",function(o,i){return ");break;case"!":m(n=n.slice(1)),i.push("+o."+n+"+");break;case"_":""!=(n=n.slice(1))&&"else"!=n||(n=u[u.length-1]),t=o[n]+2,i.push("})+"+s+'(o,"'+n.replace(/\?$/,"")+'",'+t+",function(o,i){return ");break;default:"?"==n.slice(-1)?(t=4,u.push(n),y(n,o[n]),o[n]=t,i.push("+"+s+'(o,"'+n.slice(0,-1)+'",'+t+",function(o){return ")):(m(n),n="this"==n?"o":"i"==n?"i":"o."+n,i.push("+"+a+"("+n+")+"))}return i="\n"+k(d.toString())+";\n\n"+k(g.toString())+";\n\n return "+i.join("").replace(/\r?\n/g,l),new Function("o",i)}function m(e){if(!e.match(/^[\w.\[\]\"\\']+$/))throw new Error('invalid property "'+e+'"')}function y(e,r){if(void 0!==r)throw new Error('cannot overwrite existing conditional for "'+e+'"')}function k(e){return e.replace(/^/gm,"  ")}return{render:function(e,r,n){r=r||{};var t=(n=n||{}).key&&i[n.key]||o(e,n);return n.key&&!i[n.key]&&(i[n.key]=t),t(r)},compile:o}}();"undefined"!=typeof module&&module.exports&&(exports=module.exports=qiq.render,exports.compile=qiq.compile);
