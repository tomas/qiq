var qiq=function(){var i={},f=/\{\{ ?| ?\}\}/;function h(e){return e.name||(e.toString().match(/function (.+?)\(/)||[,""])[1]}function g(e,n,r,t){var i=e[n];if(4==r)return!i||void 0!==i.length&&!i.length?"":t(e);if(1<r&&g.last)return g.last=null,"";if(Array.isArray(i))return r%3==0?i.length?"":t(e):1==r?i.map(t).join(""):t(i);if(1==r&&i&&i.constructor===Object)return t(i);if("function"==typeof i){if("boolean"!=typeof(i=i.call(e,t(e))))return i;i||2!==r||(i=!i)}return r%3==0&&(i=!i),(g.last=i)?t(e):""}function d(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(e,n){n=n||{};for(var r,t,i=[],o={},u=[],c=e.split(n.delimiter||f),l=n.escapeNewLines?"\\\\\\n":"\\n",a=h(d),s=h(g),p=0;p<c.length;++p)if(r=c[p],p%2==0)i.push('"'+r.replace(/"/g,'\\"')+'"');else switch(r[0]){case"/":""!=(r=r.slice(1))&&u[u.length-1]!=r||(i.push("})+"),u.pop(),delete o[r]);break;case"^":r=r.slice(1),t=0,u.push(r),m(r),y(o[r]),o[r]=t,i.push("+"+s+'(o,"'+r+'",'+t+",function(o,i){return ");break;case"#":r=r.slice(1),t=1,u.push(r),m(r),y(r,o[r]),o[r]=t,i.push("+"+s+'(o,"'+r+'",'+t+",function(o,i){return ");break;case"!":m(r=r.slice(1)),i.push("+o."+r+"+");break;case"_":""!=(r=r.slice(1))&&"else"!=r||(r=u[u.length-1]),t=o[r]+2,i.push("})+"+s+'(o,"'+r.replace(/\?$/,"")+'",'+t+",function(o,i){return ");break;default:"?"==r.slice(-1)?(t=4,u.push(r),y(r,o[r]),o[r]=t,i.push("+"+s+'(o,"'+r.slice(0,-1)+'",'+t+",function(o){return ")):(m(r),r="this"==r?"o":"i"==r?"i":"o."+r,i.push("+"+a+"("+r+")+"))}return i="\n"+k(d.toString())+";\n\n"+k(g.toString())+";\n\n return "+i.join("").replace(/\r?\n/g,l),new Function("o",i)}function m(e){if(!e.match(/^[\w.\[\]\"\\']+$/))throw new Error('invalid property "'+e+'"')}function y(e,n){if(void 0!==n)throw new Error('cannot overwrite existing conditional for "'+e+'"')}function k(e){return e.replace(/^/gm,"  ")}return{render:function(e,n,r){n=n||{};var t=(r=r||{}).key&&i[r.key]||o(e,r);return r.key&&!i[r.key]&&(i[r.key]=t),t(n)},compile:o}}();"undefined"!=typeof module&&module.exports&&(exports=module.exports=qiq.render,exports.compile=qiq.compile);
